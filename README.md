# FIVEN:FREEDOM - ì‚¬ê¸° ì‹ ê³  ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œ

![Node.js](https://img.shields.io/badge/Node.js-18.x-43853d?style=for-the-badge&logo=node.js&logoColor=white)
![Express](https://img.shields.io/badge/Express-4.18.2-000000?style=for-the-badge&logo=express&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-8.0+-4479A1?style=for-the-badge&logo=mysql&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)
![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)
![PM2](https://img.shields.io/badge/PM2-2B037A?style=for-the-badge&logo=pm2&logoColor=white)

> **í”„ë¡œë•ì…˜ ìš´ì˜ ì¤‘** | FiveM ê²Œì„ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ìœ„í•œ ì‹¤ì‹œê°„ ì‚¬ê¸° ì „ì  ì¡°íšŒ ë° ê´€ë¦¬ ì‹œìŠ¤í…œ

Oracle Cloud ì¸í”„ë¼ ê¸°ë°˜ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‹¤ì œ ìš´ì˜ ì¤‘ì¸ í’€ìŠ¤íƒ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.
Node.js/Express ë°±ì—”ë“œ, Vanilla JavaScript í”„ë¡ íŠ¸ì—”ë“œ, MySQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì‚¬ê¸° í”¼í•´ ë°©ì§€ ì†”ë£¨ì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.

---

## ğŸ“‘ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ï¸-ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ï¸-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
- [API ëª…ì„¸](#-api-ëª…ì„¸)
- [ë³´ì•ˆ êµ¬í˜„](#-ë³´ì•ˆ-êµ¬í˜„)
- [ì„¤ì¹˜ ë° ì‹¤í–‰](#-ì„¤ì¹˜-ë°-ì‹¤í–‰)
- [í•µì‹¬ ê¸°ìˆ  êµ¬í˜„](#-í•µì‹¬-ê¸°ìˆ -êµ¬í˜„)
- [í”„ë¡œì íŠ¸ í†µê³„](#-í”„ë¡œì íŠ¸-í†µê³„)
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì œ

FiveM ê²Œì„ ì»¤ë®¤ë‹ˆí‹° ë‚´ì—ì„œ ì•„ì´í…œ/ê¸ˆì „ ê±°ë˜ ì‹œ ì‚¬ê¸° í”¼í•´ê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ì§€ë§Œ, ì‚¬ê¸°ê¾¼ì˜ ì „ì ì„ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ì¤‘ì•™í™”ëœ ì‹œìŠ¤í…œì´ ë¶€ì¬í–ˆìŠµë‹ˆë‹¤.

### ì†”ë£¨ì…˜

- **ì‹¤ì‹œê°„ ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ**: ì‚¬ìš©ì ê³ ìœ ë²ˆí˜¸ë¡œ ì‚¬ê¸° ì „ì  ì¦‰ì‹œ í™•ì¸
- **ê´€ë¦¬ì ê²€ì¦ ì‹œìŠ¤í…œ**: í—ˆìœ„ ì‹ ê³  ë°©ì§€ë¥¼ ìœ„í•œ 2ë‹¨ê³„ ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤
- **ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬**: ì‚¬ìš©ì ì§ì ‘ ì œë³´ â†’ ê´€ë¦¬ì ê²€í†  â†’ ë“±ë¡ ì›Œí¬í”Œë¡œìš°
- **í•œêµ­ì–´ ìµœì í™”**: ì–µ/ë§Œì› ë‹¨ìœ„ ìë™ ë³€í™˜, ì™„ì „ í•œê¸€ ì¸í„°í˜ì´ìŠ¤

### í”„ë¡œë•ì…˜ í™˜ê²½

- **ì„œë²„**: Oracle Cloud Infrastructure (Seoul Region)
- **IP**: `168.107.28.244:3000`
- **í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬**: PM2 (ìë™ ì¬ì‹œì‘, ë¬´ì¤‘ë‹¨ ë°°í¬)
- **ë°ì´í„°ë² ì´ìŠ¤**: MySQL 8.0+ (UTF8MB4 ì¸ì½”ë”©)
- **ë°°í¬ ì „ëµ**: Git â†’ SSH Pull â†’ PM2 Reload

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ì‚¬ìš©ì ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… | ê¸°ìˆ  êµ¬í˜„ |
|------|------|-----------|
| ğŸ” **ì‚¬ê¸° ì „ì  ì¡°íšŒ** | ê³ ìœ ë²ˆí˜¸ë¡œ ì¦‰ì‹œ ì¡°íšŒ, í”¼í•´ì/ê°€í•´ì êµ¬ë¶„ í‘œì‹œ | RESTful API + MySQL ì¸ë±ì‹± |
| ğŸ¨ **ì´ìŠ¤í„°ì—ê·¸** | ê°œë°œì/ê´€ë¦¬ì ID ì¡°íšŒ ì‹œ íŠ¹ë³„ ì• ë‹ˆë©”ì´ì…˜ | CSS í‚¤í”„ë ˆì„ ì• ë‹ˆë©”ì´ì…˜ (15+ effects) |
| ğŸ“Š **ì‹¤ì‹œê°„ í†µê³„** | ì˜¨ë¼ì¸ ìœ ì € ìˆ˜, ì „ì²´ ì‚¬ê¸° ê±´ìˆ˜ ìë™ ê°±ì‹  | 10ì´ˆ ì£¼ê¸° í´ë§ (setInterval) |
| ğŸ“¢ **ê³µì§€ì‚¬í•­** | ìµœì‹  10ê°œ ê³µì§€ì‚¬í•­ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ | LIMIT 10 + ORDER BY created_at DESC |
| ğŸ“ **ì‚¬ê¸° ì œë³´** | Discord ID í¬í•¨ í”¼í•´ ë‚´ì—­ ì œì¶œ | pending_reports í…Œì´ë¸” + ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš° |
| ğŸ’° **ê¸ˆì•¡ í‘œê¸°** | "50ë§Œì›", "1ì–µ" í•œêµ­ì‹ ë‹¨ìœ„ ìë™ ë³€í™˜ | JavaScript ìˆ«ì ë³€í™˜ ì•Œê³ ë¦¬ì¦˜ |
| ğŸ” **ì„¸ì…˜ ìœ ì§€** | ìì •ê¹Œì§€ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€ | ë™ì  ì„¸ì…˜ ë§Œë£Œ (getMillisecondsUntilMidnight) |

### ê´€ë¦¬ì ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… | ê¸°ìˆ  êµ¬í˜„ |
|------|------|-----------|
| âœ… **ì œë³´ ìŠ¹ì¸/ê±°ë¶€** | ì‚¬ìš©ì ì œë³´ ê²€í†  í›„ ë¸”ë™ë¦¬ìŠ¤íŠ¸ ë“±ë¡ | Transaction + INSERT/DELETE |
| ğŸ—ƒï¸ **ì‚¬ê¸° ì „ì  ê´€ë¦¬** | í”¼í•´ì/ê°€í•´ì ì •ë³´, ê¸ˆì•¡/ì•„ì´í…œ êµ¬ë¶„ ë“±ë¡ | 4-field format (victim/attacker separation) |
| ğŸ”„ **ì¼ê´„ ID ë³€ê²½** | íŠ¹ì • IDì˜ ëª¨ë“  ì „ì ì„ ìƒˆ IDë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ | Bulk UPDATE with CASE statements |
| ğŸ”‘ **ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬** | ì‚¬ì´íŠ¸/ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ | bcrypt í•´ì‹± (10 rounds) |
| ğŸ“ˆ **í†µê³„ ìˆ˜ì •** | ì˜¨ë¼ì¸ ìœ ì € ìˆ˜ ìˆ˜ë™ ì¡°ì • | Singleton pattern (id=1) |
| ğŸ‘¥ **ì„¸ì…˜ ì¶”ì ** | í˜„ì¬ ë¡œê·¸ì¸í•œ ê´€ë¦¬ì ìˆ˜ í‘œì‹œ | Map-based session tracking + 30s cleanup |

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend

| ê¸°ìˆ  | ë²„ì „ | ì—­í•  | ì„ íƒ ì´ìœ  |
|------|------|------|-----------|
| **Node.js** | 18.x | JavaScript ëŸ°íƒ€ì„ | ë¹„ë™ê¸° I/O ì²˜ë¦¬, í’ë¶€í•œ ìƒíƒœê³„ |
| **Express.js** | 4.18.2 | ì›¹ í”„ë ˆì„ì›Œí¬ | ë¯¸ë“¤ì›¨ì–´ ê¸°ë°˜ ë¼ìš°íŒ…, RESTful API êµ¬í˜„ ìš©ì´ |
| **MySQL2** | 3.6.5 | ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ | Promise/Async-Await ì§€ì›, Prepared Statements |
| **bcrypt** | 6.0.0 | ë¹„ë°€ë²ˆí˜¸ í•´ì‹± | ì‚°ì—… í‘œì¤€ ì•”í˜¸í™”, Salt ìë™ ìƒì„± |
| **express-session** | 1.17.3 | ì„¸ì…˜ ê´€ë¦¬ | ì„œë²„ ì‚¬ì´ë“œ ì„¸ì…˜, ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦ |
| **dotenv** | 16.3.1 | í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ | ë¯¼ê° ì •ë³´ ë¶„ë¦¬, .env íŒŒì¼ ì§€ì› |

### Frontend

| ê¸°ìˆ  | ìš©ë„ | íŠ¹ì§• |
|------|------|------|
| **Vanilla JavaScript (ES6+)** | DOM ì¡°ì‘, API í†µì‹  | í”„ë ˆì„ì›Œí¬ ì—†ì´ ìˆœìˆ˜ JSë¡œ êµ¬í˜„ (ë²ˆë“¤ë§ ë¶ˆí•„ìš”) |
| **CSS3** | ìŠ¤íƒ€ì¼ë§, ì• ë‹ˆë©”ì´ì…˜ | 15+ í‚¤í”„ë ˆì„ ì• ë‹ˆë©”ì´ì…˜, Glass Morphism, Gradient |
| **Fetch API** | ë¹„ë™ê¸° HTTP ìš”ì²­ | async/await íŒ¨í„´, JSON ìë™ íŒŒì‹± |
| **HTML5** | ì‹œë§¨í‹± ë§ˆí¬ì—… | ì ‘ê·¼ì„± ê³ ë ¤, SEO ìµœì í™” |

### Database

| ê¸°ìˆ  | ì„¤ì • | ëª©ì  |
|------|------|------|
| **MySQL** | 8.0+ | íŠ¸ëœì­ì…˜, ACID ë³´ì¥, ê´€ê³„í˜• ë°ì´í„° ê´€ë¦¬ |
| **UTF8MB4** | ë¬¸ì ì¸ì½”ë”© | í•œê¸€, ì´ëª¨ì§€ ì™„ë²½ ì§€ì› |
| **Indexes** | unique_id, attacker_id | ì¡°íšŒ ì„±ëŠ¥ ìµœì í™” (O(log n)) |

### DevOps

| ë„êµ¬ | ìš©ë„ | ì„¤ì • |
|------|------|------|
| **PM2** | í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ | Auto-restart, Log rotation, Cluster mode ì§€ì› |
| **Git/GitHub** | ë²„ì „ ê´€ë¦¬ | ë¸Œëœì¹˜ ì „ëµ: main (production) |
| **Ubuntu Server** | ìš´ì˜ í™˜ê²½ | Oracle Cloud, 20.04 LTS |
| **nodemon** | ê°œë°œ í™˜ê²½ | íŒŒì¼ ë³€ê²½ ê°ì§€, ìë™ ì¬ì‹œì‘ |

---

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   index.html     â”‚              â”‚   admin.html      â”‚    â”‚
â”‚  â”‚  (Public User)   â”‚              â”‚  (Admin Panel)    â”‚    â”‚
â”‚  â”‚                  â”‚              â”‚                   â”‚    â”‚
â”‚  â”‚ â€¢ 10s Polling    â”‚              â”‚ â€¢ 2min Timeout    â”‚    â”‚
â”‚  â”‚ â€¢ Session: 24h   â”‚              â”‚ â€¢ Bulk Update     â”‚    â”‚
â”‚  â”‚ â€¢ Easter Eggs    â”‚              â”‚ â€¢ Approval Flow   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                                  â”‚              â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                           â”‚ Fetch API (JSON)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Application Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚               Express.js Server (server.js)         â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  Middleware Chain:                                   â”‚    â”‚
â”‚  â”‚  1. express-session  â†’ Session Management            â”‚    â”‚
â”‚  â”‚  2. body-parser      â†’ JSON Parsing                  â”‚    â”‚
â”‚  â”‚  3. requireAdmin     â†’ Authorization Check           â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  API Routes:                                         â”‚    â”‚
â”‚  â”‚  â€¢ Public:  8 endpoints  (GET/POST)                  â”‚    â”‚
â”‚  â”‚  â€¢ Admin:  19 endpoints  (GET/POST/DELETE)           â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  Session Logic:                                      â”‚    â”‚
â”‚  â”‚  â€¢ User:  Expires at midnight (dynamic maxAge)       â”‚    â”‚
â”‚  â”‚  â€¢ Admin: 2-minute inactivity timeout                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                               â”‚ mysql2 (Prepared Statements)
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Data Layer                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚             MySQL Database (webapp_db)              â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  Tables (7):                                         â”‚    â”‚
â”‚  â”‚  â”œâ”€ fraud_reports      â†’ Main blacklist (indexed)    â”‚    â”‚
â”‚  â”‚  â”œâ”€ pending_reports    â†’ Approval queue              â”‚    â”‚
â”‚  â”‚  â”œâ”€ announcements      â†’ Public notices              â”‚    â”‚
â”‚  â”‚  â”œâ”€ tip_reports        â†’ Admin tips                  â”‚    â”‚
â”‚  â”‚  â”œâ”€ site_password      â†’ bcrypt hashed               â”‚    â”‚
â”‚  â”‚  â”œâ”€ admin_password     â†’ bcrypt hashed               â”‚    â”‚
â”‚  â”‚  â””â”€ site_stats         â†’ Singleton (id=1)            â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚  Indexes: unique_id, attacker_id (B-Tree)            â”‚    â”‚
â”‚  â”‚  Encoding: UTF8MB4 (ì´ëª¨ì§€ ì§€ì›)                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„ (ì‚¬ê¸° ì „ì  ì¡°íšŒ ì˜ˆì‹œ)

```
1. User Input (uniqueId: 12345)
   â””â”€â†’ searchFraudReports(12345)
       â””â”€â†’ fetch('/api/fraud-reports/12345')
           â””â”€â†’ Express Route Handler
               â””â”€â†’ Session Validation (req.session.siteAuthorized)
                   â””â”€â†’ MySQL Query: SELECT * FROM fraud_reports
                                     WHERE attacker_id = ?
                                     ORDER BY report_date DESC
                       â””â”€â†’ Results (Array of fraud cases)
                           â””â”€â†’ JSON Response { success: true, data: [...] }
                               â””â”€â†’ Client Rendering (HTML + Korean formatting)
                                   â””â”€â†’ Display: "í”¼í•´ê¸ˆì•¡: 50ë§Œì›"
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ERD (Entity Relationship Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ site_password   â”‚         â”‚ admin_password   â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ PK id           â”‚         â”‚ PK id            â”‚
â”‚    password     â”‚         â”‚    password      â”‚
â”‚    (bcrypt)     â”‚         â”‚    (bcrypt)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â”‚                            â”‚
        â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Authentication Layer                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    pending_reports      â”‚    User Submission
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚
â”‚ PK id                   â”‚         â”‚ POST /api/submit-report
â”‚    reporter_unique_id   â”‚         â–¼
â”‚    reporter_nickname    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    discord_id           â”‚    â”‚ Pending â”‚
â”‚    report_date          â”‚    â”‚  Queue  â”‚
â”‚    fraudster_unique_id  â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
â”‚    amount (BIGINT)      â”‚         â”‚
â”‚    reason (TEXT)        â”‚         â”‚ Admin Review
â”‚    created_at           â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
        â”‚                            â”‚
        â”‚ Approve                   â”‚ Reject
        â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    [DELETE]
â”‚    fraud_reports        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ PK id                   â”‚    Main Blacklist
â”‚    report_date          â”‚         â”‚
â”‚    unique_id (INDEX)    â”‚         â”‚
â”‚    victim_id            â”‚         â”‚ GET /api/fraud-reports/:id
â”‚    victim_nickname      â”‚         â–¼
â”‚    attacker_id (INDEX)  â”‚    [Public Query]
â”‚    attacker_nickname    â”‚
â”‚    amount (VARCHAR)     â”‚    Supports:
â”‚    amount_type (ENUM)   â”‚    â€¢ money
â”‚    reason (TEXT)        â”‚    â€¢ item
â”‚    created_at           â”‚    â€¢ both (mixed)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ announcements   â”‚         â”‚   tip_reports    â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ PK id           â”‚         â”‚ PK id            â”‚
â”‚    title        â”‚         â”‚    content       â”‚
â”‚    content      â”‚         â”‚    created_at    â”‚
â”‚    created_at   â”‚         â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â”‚ LIMIT 10                  â”‚ Admin Only
        â–¼                            â–¼
[Public Display]            [Internal Notes]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   site_stats    â”‚    Singleton Pattern
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ PK id (=1)      â”‚
â”‚    online_users â”‚    Manual Update by Admin
â”‚    last_update  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” í…Œì´ë¸” ì„¤ëª…

#### 1. fraud_reports (ì‚¬ê¸° ì „ì  ë¸”ë™ë¦¬ìŠ¤íŠ¸)

```sql
CREATE TABLE fraud_reports (
  id INT AUTO_INCREMENT PRIMARY KEY,
  report_date DATE NOT NULL,
  unique_id INT NOT NULL,                    -- Legacy field (keep for compatibility)
  victim_id INT,                             -- í”¼í•´ì ID
  victim_nickname VARCHAR(255),              -- í”¼í•´ì ë‹‰ë„¤ì„
  attacker_id INT,                           -- ê°€í•´ì ID (ì‚¬ê¸°ê¾¼)
  attacker_nickname VARCHAR(255),            -- ê°€í•´ì ë‹‰ë„¤ì„
  amount VARCHAR(255) NOT NULL,              -- í”¼í•´ ê¸ˆì•¡/ì•„ì´í…œ (ìœ ì—°í•œ VARCHAR)
  amount_type VARCHAR(20) DEFAULT 'money',   -- ENUM: 'money', 'item', 'both'
  reason TEXT NOT NULL,                      -- ì‚¬ê¸° ì‚¬ìœ 
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  INDEX idx_unique_id (unique_id),           -- ë¹ ë¥¸ ì¡°íšŒë¥¼ ìœ„í•œ ì¸ë±ìŠ¤
  INDEX idx_attacker_id (attacker_id)        -- ê°€í•´ì ê²€ìƒ‰ ìµœì í™”
);
```

**ì„¤ê³„ í¬ì¸íŠ¸**:
- `amount`ë¥¼ VARCHARë¡œ ë³€ê²½: "500,000 + ëŒë³´ë¥´ê¸°ë‹ˆ" ê°™ì€ ë³µí•© ì •ë³´ ì €ì¥ ê°€ëŠ¥
- `amount_type` ENUM: ê¸ˆì•¡/ì•„ì´í…œ/ë‘˜ ë‹¤ êµ¬ë¶„
- í”¼í•´ì/ê°€í•´ì ë¶„ë¦¬: í–¥í›„ ë¶„ì„ ê¸°ëŠ¥ í™•ì¥ ê°€ëŠ¥ (ì¬ë²”ì ì¶”ì  ë“±)

#### 2. pending_reports (ìŠ¹ì¸ ëŒ€ê¸° í)

```sql
CREATE TABLE pending_reports (
  id INT AUTO_INCREMENT PRIMARY KEY,
  reporter_unique_id INT NOT NULL,           -- ì œë³´ì ID
  reporter_nickname VARCHAR(255) NOT NULL,   -- ì œë³´ì ë‹‰ë„¤ì„
  discord_id VARCHAR(255) NOT NULL,          -- ì œë³´ì Discord ID (ì—°ë½ìš©)
  report_date DATE NOT NULL,                 -- ì‚¬ê¸° ë°œìƒ ë‚ ì§œ
  fraudster_unique_id INT NOT NULL,          -- ì‚¬ê¸°ê¾¼ ID
  amount BIGINT NOT NULL,                    -- í”¼í•´ ê¸ˆì•¡ (ìˆ«ìë§Œ)
  reason TEXT NOT NULL,                      -- ì‚¬ê¸° ì‚¬ìœ 
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**ì›Œí¬í”Œë¡œìš°**:
1. ì‚¬ìš©ìê°€ `/api/submit-report`ë¡œ ì œë³´
2. `pending_reports`ì— INSERT
3. ê´€ë¦¬ìê°€ `/api/admin/pending-reports`ì—ì„œ í™•ì¸
4. ìŠ¹ì¸ â†’ `fraud_reports`ë¡œ ì´ë™, ê±°ë¶€ â†’ DELETE

#### 3. site_password / admin_password

```sql
CREATE TABLE site_password (
  id INT PRIMARY KEY DEFAULT 1,
  password VARCHAR(255) NOT NULL              -- bcrypt í•´ì‹œ ($2b$10$...)
);
```

**ë³´ì•ˆ ê°•í™”**:
- í‰ë¬¸ ì €ì¥ â†’ bcrypt í•´ì‹± ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
- Salt ìë™ ìƒì„± (10 rounds)
- Rainbow Table ê³µê²© ë°©ì§€

---

## ğŸ”Œ API ëª…ì„¸

### Public API (8 endpoints)

| Method | Endpoint | ì¸ì¦ | ì„¤ëª… | Request Body | Response |
|--------|----------|------|------|--------------|----------|
| GET | `/api/check-session` | âŒ | ì„¸ì…˜ ìœ íš¨ì„± í™•ì¸ | - | `{ authorized: true/false }` |
| POST | `/api/verify-site-password` | âŒ | ì‚¬ìš©ì ë¡œê·¸ì¸ | `{ password }` | `{ success: true }` |
| GET | `/api/fraud-reports/:uniqueId` | âœ… | ì‚¬ê¸° ì „ì  ì¡°íšŒ | - | `{ success: true, data: [...] }` |
| GET | `/api/stats` | âœ… | í†µê³„ ì •ë³´ | - | `{ onlineUsers, fraudCount, lastUpdate }` |
| GET | `/api/announcements` | âœ… | ê³µì§€ì‚¬í•­ ëª©ë¡ | - | `{ success: true, data: [...] }` |
| POST | `/api/submit-report` | âœ… | ì‚¬ê¸° ì œë³´ ì œì¶œ | `{ reporterUniqueId, discordId, ... }` | `{ success: true, message }` |

### Admin API (19 endpoints)

<details>
<summary><b>í¼ì³ë³´ê¸° (19ê°œ ì—”ë“œí¬ì¸íŠ¸)</b></summary>

| Method | Endpoint | ê¸°ëŠ¥ | Request Body |
|--------|----------|------|--------------|
| GET | `/api/admin/check-session` | ê´€ë¦¬ì ì„¸ì…˜ í™•ì¸ | - |
| POST | `/api/admin/verify-password` | ê´€ë¦¬ì ë¡œê·¸ì¸ | `{ password }` |
| POST | `/api/admin/logout` | ë¡œê·¸ì•„ì›ƒ | - |
| **Fraud Management** |
| POST | `/api/admin/fraud-reports` | ì‚¬ê¸° ì „ì  ë“±ë¡ | `{ reportDate, victimId, attackerId, amount, amountType, reason }` |
| GET | `/api/admin/fraud-reports` | ì „ì²´ ì „ì  ì¡°íšŒ | - |
| DELETE | `/api/admin/fraud-reports/:id` | ì „ì  ì‚­ì œ | - |
| POST | `/api/admin/bulk-update-id` | ID ì¼ê´„ ë³€ê²½ | `{ oldId, newId }` |
| **Pending Reports** |
| GET | `/api/admin/pending-reports` | ëŒ€ê¸° ì¤‘ ì œë³´ ëª©ë¡ | - |
| POST | `/api/admin/approve-report/:id` | ì œë³´ ìŠ¹ì¸ | - |
| DELETE | `/api/admin/reject-report/:id` | ì œë³´ ê±°ë¶€ | - |
| **Announcements** |
| POST | `/api/admin/announcements` | ê³µì§€ì‚¬í•­ ë“±ë¡ | `{ title, content }` |
| DELETE | `/api/admin/announcements/:id` | ê³µì§€ì‚¬í•­ ì‚­ì œ | - |
| **Tips** |
| POST | `/api/admin/tip-reports` | ì œë³´ ë“±ë¡ | `{ content }` |
| GET | `/api/admin/tip-reports` | ì œë³´ ëª©ë¡ | - |
| DELETE | `/api/admin/tip-reports/:id` | ì œë³´ ì‚­ì œ | - |
| **Settings** |
| POST | `/api/admin/change-site-password` | ì‚¬ì´íŠ¸ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ | `{ newPassword }` |
| POST | `/api/admin/change-admin-password` | ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ | `{ newPassword }` |
| POST | `/api/admin/update-stats` | í†µê³„ ì—…ë°ì´íŠ¸ | `{ onlineUsers, lastUpdateDate }` |
| GET | `/api/admin/active-admins` | í˜„ì¬ ë¡œê·¸ì¸ ê´€ë¦¬ì ìˆ˜ | - |

</details>

---

## ğŸ”’ ë³´ì•ˆ êµ¬í˜„

### 1. ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ (Bcrypt Hashing)

#### ë§ˆì´ê·¸ë ˆì´ì…˜ ê³¼ì •
```
í‰ë¬¸ ì €ì¥ (Initial)  â†’  bcrypt í•´ì‹± (Enhanced)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"freedom2025"         â†’  "$2b$10$QbeQYM3fZelfA59P..."
"admin2025"           â†’  "$2b$10$IJlAg5UsEt.HlVge..."
```

#### êµ¬í˜„ ì½”ë“œ
```javascript
// ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (íšŒì›ê°€ì…/ë³€ê²½ ì‹œ)
const hashedPassword = await bcrypt.hash(newPassword, 10);

// ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ (ë¡œê·¸ì¸ ì‹œ)
const isMatch = await bcrypt.compare(inputPassword, storedHash);
```

#### ë³´ì•ˆ ì´ì 
- âœ… **ì¼ë°©í–¥ ì•”í˜¸í™”**: í•´ì‹œ â†’ í‰ë¬¸ ë³µì› ë¶ˆê°€ëŠ¥
- âœ… **Salt ìë™ ìƒì„±**: ë™ì¼ ë¹„ë°€ë²ˆí˜¸ë„ ë‹¤ë¥¸ í•´ì‹œ ìƒì„±
- âœ… **Rainbow Table ë°©ì–´**: ì‚¬ì „ ê³„ì‚°ëœ í•´ì‹œ í…Œì´ë¸” ë¬´ë ¥í™”
- âœ… **Brute-Force ì €í•­**: 10 roundsë¡œ ì˜ë„ì  ì—°ì‚° ì§€ì—°

### 2. SQL Injection ë°©ì§€

```javascript
// âŒ ì·¨ì•½í•œ ì½”ë“œ
db.query(`SELECT * FROM fraud_reports WHERE unique_id = ${userInput}`);

// âœ… ì•ˆì „í•œ ì½”ë“œ (Prepared Statements)
db.query(
  'SELECT * FROM fraud_reports WHERE attacker_id = ?',
  [userInput],  // íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
  (err, results) => { /* ... */ }
);
```

**ì ìš© ë²”ìœ„**: í”„ë¡œì íŠ¸ ë‚´ ëª¨ë“  ì¿¼ë¦¬ (100% ì»¤ë²„ë¦¬ì§€)

### 3. ì„¸ì…˜ ê´€ë¦¬

#### ì‚¬ìš©ì ì„¸ì…˜ (24ì‹œê°„ â†’ ìì • ë§Œë£Œ)
```javascript
function getMillisecondsUntilMidnight() {
  const now = new Date();
  const midnight = new Date(now);
  midnight.setHours(24, 0, 0, 0);
  return midnight - now;
}

app.use((req, res, next) => {
  req.session.cookie.maxAge = getMillisecondsUntilMidnight();
  next();
});
```

#### ê´€ë¦¬ì ì„¸ì…˜ (2ë¶„ ë¹„í™œë™ íƒ€ì„ì•„ì›ƒ)
```javascript
const activeAdminSessions = new Map(); // sessionID â†’ lastActivityTime

setInterval(() => {
  const now = Date.now();
  activeAdminSessions.forEach((lastActivity, sessionId) => {
    if (now - lastActivity > 2 * 60 * 1000) {  // 2ë¶„ ì´ˆê³¼
      activeAdminSessions.delete(sessionId);
    }
  });
}, 30000);  // 30ì´ˆë§ˆë‹¤ ì •ë¦¬
```

### 4. í™˜ê²½ ë³€ìˆ˜ ë³´í˜¸

```bash
# .env íŒŒì¼ (Git ì œì™¸)
DB_HOST=localhost
DB_USER=webapp_user
DB_PASSWORD=secure_password_here
DB_NAME=webapp_db
SESSION_SECRET=random_secret_key_here
PORT=3000
```

```javascript
// .env ë¡œë“œ
require('dotenv').config();

// ì‚¬ìš©
const db = mysql.createConnection({
  host: process.env.DB_HOST,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  database: process.env.DB_NAME
});
```

### 5. ì¸ì¦ ë¯¸ë“¤ì›¨ì–´

```javascript
const requireAdmin = (req, res, next) => {
  if (!req.session.adminAuthorized) {
    return res.status(401).json({
      success: false,
      message: 'ê´€ë¦¬ì ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.'
    });
  }

  // í™œë™ ì‹œê°„ ê°±ì‹ 
  activeAdminSessions.set(req.sessionID, Date.now());
  next();
};

// 17ê°œ ê´€ë¦¬ì ì—”ë“œí¬ì¸íŠ¸ì— ì ìš©
app.post('/api/admin/fraud-reports', requireAdmin, (req, res) => {
  // Protected route logic
});
```

---

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Node.js 18.x ì´ìƒ
- MySQL 8.0 ì´ìƒ
- npm ë˜ëŠ” yarn
- Git

### 2. ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/Jeong-Ryeol/SibaServerMonitering.git
cd SibaServerMonitering

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cat > .env << EOF
DB_HOST=localhost
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_NAME=webapp_db
SESSION_SECRET=$(openssl rand -base64 32)
PORT=3000
EOF

# 4. MySQL ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
mysql -u root -p << SQL
CREATE DATABASE webapp_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'webapp_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON webapp_db.* TO 'webapp_user'@'localhost';
FLUSH PRIVILEGES;
SQL

# 5. ìŠ¤í‚¤ë§ˆ ìƒì„± (bcrypt í•´ì‹± ë²„ì „)
mysql -u webapp_user -p webapp_db < reset_db.sql

# 6. (ì„ íƒ) ê¸°ì¡´ DBë¥¼ ì‚¬ìš© ì¤‘ì´ë¼ë©´ ë¹„ë°€ë²ˆí˜¸ë§Œ ì—…ë°ì´íŠ¸
mysql -u webapp_user -p webapp_db < update_passwords.sql
# ë˜ëŠ”
node update_passwords_db.js

# 7. ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

### 3. í”„ë¡œë•ì…˜ ë°°í¬ (PM2)

```bash
# PM2 ì „ì—­ ì„¤ì¹˜
sudo npm install -g pm2

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘
pm2 start server.js --name fiven-freedom

# ìƒíƒœ í™•ì¸
pm2 status

# ë¡œê·¸ ëª¨ë‹ˆí„°ë§
pm2 logs fiven-freedom

# ì¬ì‹œì‘ (ì½”ë“œ ë³€ê²½ í›„)
pm2 restart fiven-freedom

# ë¶€íŒ… ì‹œ ìë™ ì‹œì‘ ì„¤ì •
pm2 startup
pm2 save

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (PM2 Ecosystem)
pm2 start ecosystem.config.js
```

**ecosystem.config.js ì˜ˆì‹œ**:
```javascript
module.exports = {
  apps: [{
    name: 'fiven-freedom',
    script: 'server.js',
    instances: 1,
    autorestart: true,
    watch: false,
    max_memory_restart: '1G',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    }
  }]
};
```

### 4. ì ‘ì† í™•ì¸

- **ë¡œì»¬**: http://localhost:3000
- **í”„ë¡œë•ì…˜**: http://168.107.28.244:3000
- **ê´€ë¦¬ì í˜ì´ì§€**: http://168.107.28.244:3000/admin.html

---

## ğŸ’¡ í•µì‹¬ ê¸°ìˆ  êµ¬í˜„

### 1. ë™ì  ì„¸ì…˜ ë§Œë£Œ (ìì • ë¦¬ì…‹)

```javascript
function getMillisecondsUntilMidnight() {
  const now = new Date();
  const midnight = new Date(now);
  midnight.setHours(24, 0, 0, 0);
  return midnight - now;
}

app.use((req, res, next) => {
  if (req.session.siteAuthorized) {
    req.session.cookie.maxAge = getMillisecondsUntilMidnight();
  }
  next();
});
```

**íš¨ê³¼**: ëª¨ë“  ì‚¬ìš©ìê°€ ìì •ì— ë™ì‹œì— ë¡œê·¸ì•„ì›ƒ â†’ ì¼ì¼ ì ‘ì† í†µê³„ ì •í™•ì„± í–¥ìƒ

### 2. í•œêµ­ì‹ ê¸ˆì•¡ í‘œê¸° ì•Œê³ ë¦¬ì¦˜

```javascript
function numberToKorean(number) {
  const num = parseInt(number.toString().replace(/,/g, ''));

  if (num >= 1000000000000) {      // 1ì¡° ì´ìƒ
    const jo = Math.floor(num / 1000000000000);
    const remainder = num % 1000000000000;
    if (remainder === 0) return `${jo}ì¡°`;

    const eok = Math.floor(remainder / 100000000);
    if (eok === 0) return `${jo}ì¡°`;
    return `${jo}ì¡° ${eok}ì–µ`;

  } else if (num >= 100000000) {   // 1ì–µ ì´ìƒ
    return `${Math.floor(num / 100000000)}ì–µ`;

  } else if (num >= 10000) {       // 1ë§Œ ì´ìƒ
    return `${(num / 10000).toFixed(0)}ë§Œì›`;

  } else if (num >= 1000) {        // 1ì²œ ì´ìƒ
    return num.toLocaleString() + 'ì›';

  } else {
    return num + 'ì›';
  }
}
```

**ë³€í™˜ ì˜ˆì‹œ**:
- `1234567890000` â†’ "1ì¡° 2345ì–µ"
- `500000000` â†’ "5ì–µ"
- `1234567` â†’ "123ë§Œì›"
- `50000` â†’ "5ë§Œì›"

### 3. ì‹¤ì‹œê°„ í´ë§ ì‹œìŠ¤í…œ

```javascript
let lastSearchedId = null;

function startAutoRefresh() {
  setInterval(() => {
    loadStats();             // í†µê³„ ê°±ì‹ 
    loadAnnouncements();     // ê³µì§€ì‚¬í•­ ê°±ì‹ 

    // ë§ˆì§€ë§‰ ì¡°íšŒ IDê°€ ìˆìœ¼ë©´ ìë™ ì¬ì¡°íšŒ
    if (lastSearchedId !== null) {
      searchFraudReports(lastSearchedId);
    }
  }, 10000);  // 10ì´ˆ ì£¼ê¸°
}
```

**ìµœì í™”**:
- ì¡°íšŒ ê¸°ë¡ì´ ì—†ìœ¼ë©´ ìŠ¤í‚µ â†’ ë¶ˆí•„ìš”í•œ ìš”ì²­ ë°©ì§€
- ì´ìŠ¤í„°ì—ê·¸ ì¡°íšŒ ì‹œ ìë™ ê°±ì‹  ì œì™¸

### 4. í”¼í•´ì/ê°€í•´ì ë¶„ë¦¬ ê²€ìƒ‰

```javascript
// ê°€í•´ì(ì‚¬ê¸°ê¾¼) IDë¡œ ê²€ìƒ‰
db.query(`
  SELECT * FROM fraud_reports
  WHERE attacker_id = ?
  ORDER BY report_date DESC
`, [uniqueId], (err, results) => {
  // ê²°ê³¼ ë°˜í™˜
});
```

**UI í‘œì‹œ**:
```javascript
results.forEach(report => {
  const card = document.createElement('div');
  card.className = report.attacker_id == uniqueId
    ? 'fraud-report-card attacker'   // ë¹¨ê°„ìƒ‰ ê°•ì¡°
    : 'fraud-report-card';

  card.innerHTML = `
    <div class="role-badge ${report.attacker_id == uniqueId ? 'attacker-badge' : 'victim-badge'}">
      ${report.attacker_id == uniqueId ? 'ê°€í•´ì (ì‚¬ê¸°ê¾¼)' : 'í”¼í•´ì'}
    </div>
  `;
});
```

### 5. ì¼ê´„ ID ë³€ê²½ (Bulk Update)

```javascript
app.post('/api/admin/bulk-update-id', requireAdmin, (req, res) => {
  const { oldId, newId } = req.body;

  db.query(`
    UPDATE fraud_reports
    SET
      unique_id = CASE WHEN unique_id = ? THEN ? ELSE unique_id END,
      victim_id = CASE WHEN victim_id = ? THEN ? ELSE victim_id END,
      attacker_id = CASE WHEN attacker_id = ? THEN ? ELSE attacker_id END
    WHERE unique_id = ? OR victim_id = ? OR attacker_id = ?
  `, [oldId, newId, oldId, newId, oldId, newId, oldId, oldId, oldId],
  (err, result) => {
    res.json({
      success: true,
      message: `${result.affectedRows}ê°œì˜ ë ˆì½”ë“œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.`
    });
  });
});
```

**ì‚¬ìš© ì‚¬ë¡€**: ìœ ì €ê°€ ê³„ì • ë³€ê²½ ì‹œ ëª¨ë“  ê³¼ê±° ì „ì ì„ ìƒˆ IDë¡œ ì´ê´€

### 6. ì´ìŠ¤í„°ì—ê·¸ ì• ë‹ˆë©”ì´ì…˜

```css
@keyframes easterEggGlow {
  0%   { box-shadow: 0 0 150px rgba(255,215,0,1), 0 0 300px rgba(255,215,0,0.6); }
  33%  { box-shadow: 0 0 200px rgba(138,43,226,1), 0 0 400px rgba(138,43,226,0.6); }
  66%  { box-shadow: 0 0 250px rgba(0,255,255,1), 0 0 450px rgba(0,255,255,0.6); }
  100% { box-shadow: 0 0 150px rgba(255,215,0,1), 0 0 300px rgba(255,215,0,0.6); }
}

.easter-egg-container {
  animation: easterEggGlow 6s ease-in-out infinite;
  background: linear-gradient(135deg,
    rgba(255,215,0,0.3),
    rgba(255,105,180,0.3),
    rgba(138,43,226,0.3));
}
```

---

## ğŸ“Š í”„ë¡œì íŠ¸ í†µê³„

### ì½”ë“œ ê·œëª¨

| í•­ëª© | ë¼ì¸ ìˆ˜ | íŒŒì¼ ìˆ˜ |
|------|---------|---------|
| **Backend** (server.js) | ~519 lines | 1 |
| **Frontend** (index.html) | ~1,398 lines | 1 |
| **Admin Panel** (admin.html) | ~500+ lines | 1 |
| **Database Scripts** | ~200 lines | 4 files |
| **Documentation** | ~900 lines | 2 files |
| **Total** | **~3,500+ lines** | 9 files |

### API í†µê³„

- **Total Endpoints**: 27
  - Public API: 8
  - Admin API: 19
- **HTTP Methods**: GET (12), POST (13), DELETE (2)
- **Authentication**: 19 protected endpoints

### ë°ì´í„°ë² ì´ìŠ¤

- **Tables**: 7
- **Indexes**: 2 (unique_id, attacker_id)
- **Migrations**: 4 SQL scripts
- **Encoding**: UTF8MB4 (full Unicode support)

### í”„ë¡ íŠ¸ì—”ë“œ

- **CSS Animations**: 15+ keyframes
- **Custom Functions**: 20+ JavaScript functions
- **Polling Interval**: 10 seconds
- **Session Duration**: 24 hours (user), 2 minutes (admin)

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. MySQL ì—°ê²° ì‹¤íŒ¨

**ì¦ìƒ**: `MySQL ì—°ê²° ì‹¤íŒ¨: ECONNREFUSED`

**í•´ê²°**:
```bash
# MySQL ì„œë¹„ìŠ¤ í™•ì¸
sudo systemctl status mysql

# ì‹œì‘
sudo systemctl start mysql

# .env íŒŒì¼ ê²€ì¦
cat .env | grep DB_
```

### 2. í¬íŠ¸ ì¶©ëŒ (EADDRINUSE)

**ì¦ìƒ**: `Error: listen EADDRINUSE: address already in use 0.0.0.0:3000`

**í•´ê²°**:
```bash
# í¬íŠ¸ ì‚¬ìš© í”„ë¡œì„¸ìŠ¤ í™•ì¸
lsof -i :3000

# í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
kill -9 <PID>

# PM2 ì •ë¦¬
pm2 delete all
pm2 start server.js
```

### 3. ë¹„ë°€ë²ˆí˜¸ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨

**ì¦ìƒ**: `Unknown database 'fraud_reports_db'`

**ì›ì¸**: ë°ì´í„°ë² ì´ìŠ¤ëª… ë¶ˆì¼ì¹˜

**í•´ê²°**:
```bash
# ì‹¤ì œ DB ì´ë¦„ í™•ì¸
sudo mysql -e "SHOW DATABASES;"

# ì˜¬ë°”ë¥¸ DB ì´ë¦„ìœ¼ë¡œ ì—…ë°ì´íŠ¸
sudo mysql webapp_db < update_passwords.sql

# ë˜ëŠ” Node.js ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
node update_passwords_db.js
```

### 4. ì„¸ì…˜ ìœ ì§€ ì‹¤íŒ¨

**ì¦ìƒ**: ìƒˆë¡œê³ ì¹¨ ì‹œ ë‹¤ì‹œ ë¡œê·¸ì¸ ìš”êµ¬

**ì›ì¸**:
1. `.env`ì˜ SESSION_SECRET ë¯¸ì„¤ì •
2. ë¸Œë¼ìš°ì € ì¿ í‚¤ ì°¨ë‹¨
3. ì„œë²„ ì¬ì‹œì‘ìœ¼ë¡œ ì¸í•œ ì„¸ì…˜ ì´ˆê¸°í™”

**í•´ê²°**:
```javascript
// .env í™•ì¸
SESSION_SECRET=your_secret_key

// ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì¿ í‚¤ í—ˆìš©
// Chrome: ì„¤ì • â†’ ê°œì¸ì •ë³´ ë° ë³´ì•ˆ â†’ ì¿ í‚¤ ë° ê¸°íƒ€ ì‚¬ì´íŠ¸ ë°ì´í„°
```

### 5. bcrypt ì„¤ì¹˜ ì˜¤ë¥˜ (macOS)

**ì¦ìƒ**: `gyp ERR! build error`

**í•´ê²°**:
```bash
# Xcode Command Line Tools ì„¤ì¹˜
xcode-select --install

# bcrypt ì¬ì„¤ì¹˜
npm install bcrypt --build-from-source
```

---

## ğŸ“š í•™ìŠµ í¬ì¸íŠ¸ (ì·¨ì—… í¬íŠ¸í´ë¦¬ì˜¤)

ì´ í”„ë¡œì íŠ¸ì—ì„œ ë°°ìš¸ ìˆ˜ ìˆëŠ” ì‹¤ë¬´ ì—­ëŸ‰:

### Backend ê°œë°œ
- âœ… RESTful API ì„¤ê³„ ë° êµ¬í˜„ (27 endpoints)
- âœ… Express.js ë¯¸ë“¤ì›¨ì–´ íŒ¨í„´
- âœ… MySQL ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ë° ìµœì í™” (ì¸ë±ì‹±, ì •ê·œí™”)
- âœ… ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ
- âœ… ë¹„ë°€ë²ˆí˜¸ ë³´ì•ˆ (bcrypt í•´ì‹±)
- âœ… SQL Injection ë°©ì–´ (Prepared Statements)

### Frontend ê°œë°œ
- âœ… Vanilla JavaScript (í”„ë ˆì„ì›Œí¬ ì—†ì´ ìˆœìˆ˜ JS í™œìš©)
- âœ… ë¹„ë™ê¸° ì²˜ë¦¬ (Fetch API, async/await)
- âœ… DOM ì¡°ì‘ ë° ë™ì  UI ìƒì„±
- âœ… CSS ì• ë‹ˆë©”ì´ì…˜ (15+ í‚¤í”„ë ˆì„)
- âœ… ì‹¤ì‹œê°„ ë°ì´í„° í´ë§ ì‹œìŠ¤í…œ

### Database
- âœ… MySQL ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (7 tables)
- âœ… ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ (4 stages)
- âœ… ì¸ë±ì‹± ì „ëµ (B-Tree indexes)
- âœ… íŠ¸ëœì­ì…˜ ê´€ë¦¬

### DevOps
- âœ… PM2 í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬
- âœ… í”„ë¡œë•ì…˜ ì„œë²„ ë°°í¬ (Oracle Cloud)
- âœ… í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ (.env)
- âœ… Git ë²„ì „ ê´€ë¦¬

### Security
- âœ… ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (bcrypt)
- âœ… SQL Injection ë°©ì–´
- âœ… ì„¸ì…˜ ê´€ë¦¬ ë° íƒ€ì„ì•„ì›ƒ
- âœ… í™˜ê²½ ë³€ìˆ˜ ë³´í˜¸

---

## ğŸ“ ê°œì„  ê°€ëŠ¥ ì‚¬í•­ (í–¥í›„ ë°œì „ ë°©í–¥)

### ë³´ì•ˆ ê°•í™”
- [ ] HTTPS/SSL ì ìš© (Let's Encrypt)
- [ ] Rate Limiting (express-rate-limit)
- [ ] CORS ì„¤ì •
- [ ] Content Security Policy (Helmet.js)
- [ ] Input Validation (Joi, express-validator)

### ê¸°ëŠ¥ í™•ì¥
- [ ] WebSocket ì‹¤ì‹œê°„ ì•Œë¦¼
- [ ] í˜ì´ì§€ë„¤ì´ì…˜ (ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬)
- [ ] ê²€ìƒ‰ í•„í„° (ë‚ ì§œ ë²”ìœ„, ê¸ˆì•¡ ë²”ìœ„)
- [ ] CSV/Excel ë‚´ë³´ë‚´ê¸°
- [ ] Discord Bot ì—°ë™
- [ ] ì´ë©”ì¼ ì•Œë¦¼ ì‹œìŠ¤í…œ

### ì„±ëŠ¥ ìµœì í™”
- [ ] Redis ì„¸ì…˜ ìŠ¤í† ì–´
- [ ] ì¿¼ë¦¬ ìºì‹±
- [ ] CDN ì ìš© (ì •ì  íŒŒì¼)
- [ ] ì´ë¯¸ì§€ ìµœì í™”

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

---

## ğŸ‘¨â€ğŸ’» ê°œë°œì

**ì •ë ¤ì—´ (Jeong Ryeol)**
- GitHub: [@Jeong-Ryeol](https://github.com/Jeong-Ryeol)
- Project Repository: [SibaServerMonitering](https://github.com/Jeong-Ryeol/SibaServerMonitering)

---

## ğŸ™ ê°ì‚¬ì˜ ë§

ì´ í”„ë¡œì íŠ¸ëŠ” FiveM ê²Œì„ ì»¤ë®¤ë‹ˆí‹°ì˜ ì‚¬ê¸° í”¼í•´ë¥¼ ì¤„ì´ê³ ì ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.
ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ìš´ì˜í•˜ë©° ê²ªì€ ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê³ , ì‚¬ìš©ì í”¼ë“œë°±ì„ ë°˜ì˜í•˜ì—¬ ì§€ì†ì ìœ¼ë¡œ ë°œì „í•˜ê³  ìˆìŠµë‹ˆë‹¤.

**í•¨ê»˜ ë§Œë“œëŠ” ì•ˆì „í•œ ê²Œì„ ì»¤ë®¤ë‹ˆí‹°, FIVEN:FREEDOM**

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-25
**í”„ë¡œì íŠ¸ ìƒíƒœ**: ğŸŸ¢ í”„ë¡œë•ì…˜ ìš´ì˜ ì¤‘
**ì„œë²„ ì£¼ì†Œ**: http://168.107.28.244:3000
